{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-10">
            <div class="card shadow-lg border-0 overflow-hidden rounded-4">
                <div class="row g-0">
                    
                    <div class="col-md-5 bg-dark text-white p-5 d-flex flex-column justify-content-center">
                        <h2 class="fw-bold mb-3">ðŸš€ DispatchNexus</h2>
                        <p class="lead mb-4">"The operating system that runs my entire fleet automatically."</p>
                        <ul class="list-unstyled gap-3 d-flex flex-column">
                            <li><i class="fas fa-check-circle text-success me-2"></i> Track Fleet Availability</li>
                            <li><i class="fas fa-check-circle text-warning me-2"></i> Calculate Net Profit</li>
                            <li><i class="fas fa-check-circle text-info me-2"></i> Automate Compliance</li>
                        </ul>
                    </div>

                    <div class="col-md-7 p-5 bg-white">
                        <h3 class="fw-bold mb-2">Create Account</h3>
                        <p class="text-muted mb-4">Start your 30-day free trial.</p>

                        <form method="post">
                            {% csrf_token %}
                            
                            <h6 class="text-uppercase text-primary fw-bold small mb-3">Login Details</h6>
                            <div class="mb-3">{{ form.username }}</div>
                            <div class="mb-3">{{ form.email }}</div>
                            <div class="mb-3">{{ form.password }}</div>

                            <h6 class="text-uppercase text-primary fw-bold small mt-4 mb-3">Company Info</h6>
                            <div class="row g-2 mb-3">
                                <div class="col-6">{{ form.company_name }}</div>
                                <div class="col-6">{{ form.dot_number }}</div>
                            </div>
                            <div class="mb-3">{{ form.phone }}</div>

                            <h6 class="text-uppercase text-primary fw-bold small mt-4 mb-3">Address</h6>
                            <div class="mb-2">{{ form.address }}</div>
                            <div class="row g-2">
                                <div class="col-5">{{ form.city }}</div>
                                <div class="col-3">{{ form.state }}</div>
                                <div class="col-4">{{ form.zip_code }}</div>
                            </div>

                            <div class="d-grid mt-4">
                                <button type="submit" class="btn btn-primary btn-lg">Create Account &rarr;</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // 1. Phone Number Mask (US Format)
        const phoneInput = document.getElementById('phone-mask');
        if (phoneInput) {
            phoneInput.addEventListener('input', function (e) {
                var x = e.target.value.replace(/\D/g, '').match(/(\d{0,3})(\d{0,3})(\d{0,4})/);
                e.target.value = !x[2] ? x[1] : '(' + x[1] + ') ' + x[2] + (x[3] ? '-' + x[3] : '');
            });
        }

        // 2. DOT Number Mask (Numbers Only)
        const dotInput = document.getElementById('dot-mask');
        if (dotInput) {
            dotInput.addEventListener('input', function (e) {
                e.target.value = e.target.value.replace(/[^0-9]/g, '');
            });
        }
    });
</script>
{% endblock %}