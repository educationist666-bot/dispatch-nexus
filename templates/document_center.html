<!DOCTYPE html>
<html lang="en">
<head>
    <title>Document Box | DispatchNexus</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>body{background-color:#f8fafc;font-family:'Segoe UI',sans-serif;}.doc-link{text-decoration:none;font-weight:600;font-size:0.9rem;}</style>
</head>
<body class="p-4">

<div class="container-fluid">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h3>ğŸ—‚ï¸ Document Center</h3>
        <a href="{% url 'dashboard' %}" class="btn btn-outline-secondary">â† Back</a>
    </div>

    <div class="row">
        
        <div class="col-md-12 mb-4">
            <div class="card p-4 bg-white border-0 shadow-sm">
                <div class="d-flex justify-content-between">
                    <h5 class="fw-bold text-primary">ğŸ¢ My Company Documents (Dispatch)</h5>
                    <a href="{% url 'company_settings' %}" class="btn btn-sm btn-primary">Upload / Update My Docs</a>
                </div>
                <div class="d-flex gap-4 mt-3">
                    {% if company.authority_doc %}<a href="{{ company.authority_doc.url }}" target="_blank" class="doc-link text-dark">ğŸ“„ MC Authority</a>{% else %}<span class="text-muted small">No MC</span>{% endif %}
                    {% if company.w9_doc %}<a href="{{ company.w9_doc.url }}" target="_blank" class="doc-link text-dark">ğŸ“„ W-9 Form</a>{% else %}<span class="text-muted small">No W-9</span>{% endif %}
                    {% if company.insurance_doc %}<a href="{{ company.insurance_doc.url }}" target="_blank" class="doc-link text-dark">ğŸ“„ Insurance Cert</a>{% else %}<span class="text-muted small">No Ins</span>{% endif %}
                </div>
            </div>
        </div>

        <div class="col-md-12 mb-4">
            <div class="card p-4 border-0 shadow-sm">
                <h5 class="fw-bold mb-3">ğŸ“¦ Load Documents & Invoices</h5>
                <table class="table table-hover">
                    <thead><tr class="table-light"><th>Load Ref</th><th>Route</th><th>Rate Con</th><th>BOL / POD</th><th>Generated Invoice</th></tr></thead>
                    <tbody>
                        {% for load in loads %}
                        <tr>
                            <td class="fw-bold">{{ load.load_ref }}</td>
                            <td>{{ load.origin }} â {{ load.destination }}</td>
                            <td>{% if load.rate_confirmation %}<a href="{{ load.rate_confirmation.url }}" target="_blank" class="badge bg-primary text-decoration-none">Rate Con</a>{% else %}<span class="text-muted">-</span>{% endif %}</td>
                            <td>
                                {% if load.bill_of_lading %}<a href="{{ load.bill_of_lading.url }}" target="_blank" class="badge bg-success text-decoration-none">BOL</a>{% endif %}
                                {% if load.lumper_receipt %}<a href="{{ load.lumper_receipt.url }}" target="_blank" class="badge bg-warning text-dark text-decoration-none">Lumper</a>{% endif %}
                            </td>
                            <td><a href="{% url 'generate_invoice' load.id %}" target="_blank" class="badge bg-dark text-decoration-none">View Invoice</a></td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

        <div class="col-md-12">
            <div class="card p-4 border-0 shadow-sm">
                <h5 class="fw-bold mb-3">ğŸšš Driver & Truck Docs</h5>
                <table class="table table-hover">
                    <thead><tr class="table-light"><th>Unit #</th><th>Driver</th><th>Compliance Docs</th></tr></thead>
                    <tbody>
                        {% for driver in drivers %}
                        <tr>
                            <td class="fw-bold">{{ driver.truck_number }}</td>
                            <td>{{ driver.name }}</td>
                            <td>
                                {% if driver.cdl %}<a href="{{ driver.cdl.url }}" target="_blank" class="badge bg-info text-dark text-decoration-none">CDL</a>{% endif %}
                                {% if driver.medical_card %}<a href="{{ driver.medical_card.url }}" target="_blank" class="badge bg-info text-dark text-decoration-none">Med Card</a>{% endif %}
                                {% if driver.insurance_cert %}<a href="{{ driver.insurance_cert.url }}" target="_blank" class="badge bg-info text-dark text-decoration-none">Truck Ins</a>{% endif %}
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

    </div>
</div>
</body>
</html>